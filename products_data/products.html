<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            margin: 0;
        }
        #section{
            display: flex;
            margin: 40px 0 0 0;
            font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";

            
        }
        #filter{
            width: 26%;
            border: 1px solid red;
        }
        #products{
            width: 74%;
            display: grid;
            grid-template-columns: repeat(3,1fr);
            /* gap: 10px; */
            /* border: 1px solid blue; */
        }
        .card{
            /* border: 1px solid green; */
            font-size: 14px;
            font-weight: 300;
            line-height: 24px;
            text-decoration: none solid rgb(63, 63, 63);
            word-spacing: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding-bottom: 10px;
            width: 100%;
            /* height: 474px; */
        }
        .img-div{
            width: 229px;
            margin: auto;
            height: 229px;
        }
        .img-div>img{
            width: 100%;
            height: 100%;
        }
        .status{
            font-size: 12px;
            letter-spacing: 0.5px;
            line-height: 18px;
            text-decoration: none solid rgb(124, 127, 136);
            text-align: left;
            word-spacing: 0;
            color: #7C7F88;
            height: 18px;
            margin: 0 12px 4px 12px;
            /* min-height: 18px; */
            min-width: auto;
            font-weight: 500;
        }
        .title,.info,.price{
            /* font-family: ProximaNovaMedium, Arial,sans-serif; */
            font-size: 16px;
            letter-spacing: 0.5px;
            line-height: 24px;
            text-decoration: none solid rgb(34, 34, 34);
            text-align: left;
            word-spacing: 0;
            color: #222222;
            /* height: 24px; */
            width: 310px;
            margin: 0 12px 8px 12px;
            /* min-height: auto; */
            min-width: auto;
            font-weight: 500;
        }
        .info{
            font-size: 14px;
            line-height: 20.02px;
            /* height: 40px; */
            margin: 0 12px 0 12px;
            padding: 0 0 8px 0;
            font-weight: 400;
        }
        .price{
            font-weight: 500;
            text-decoration: none solid rgb(63, 63, 63);
            color: #3f3f3f;
        }
        .rating-wrapper{
            display: flex;
            margin: 0 0 20px 12px;
            align-items: center;
        }
        .rating-wrapper>div{
            margin-left: 5px;
        }
        .rating-wrapper>div:nth-child(1){
            margin-left: 0;
        }
        .rating-wrapper>div:nth-child(2){
           font-weight: 400;
        }
        .rating-wrapper>div:nth-child(3){
            font-size: 11px;
            font-weight: 500;
        }
        /* .rating-wrapper{
            font-size: 16px;
            font-weight: 300;
            line-height: 300;
            text-decoration: none solid rgb(63, 63, 63);
            height: 51px;
            width: 310px;
            margin: 0 12px 0 12px;
            min-width: auto;
            min-width: auto;
        } */
        #addtobag{
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 1px;
            line-height: 24px;
            text-decoration: none solid rgb(34, 34, 34);
            text-align: center;
            text-transform: uppercase;
            /* vertical-align: middle; */
            display: block;
            margin: auto;
            white-space: nowrap;
            word-spacing: 0;
            color: #222222;
            height: 40px;
            width: 310px;
            border: 1px solid #222222;
            border-radius: 7px;
            background-color: #ffffff;
            padding: 0 16px 0 16px;
            max-height: 40px; 
            box-shadow: 0px 3px 2px rgba(63, 63, 63, 0.3);
        }
        #addtobag:hover,#result>button:hover{
            box-shadow: inset -3px -3px 2px rgba(63, 63, 63, 0.3);
            cursor: pointer;
        }
        #result{
            width: 100%;
            /* height: 86px; */
            margin: 40px 0 30px 0;
        }
        #result>button{
            padding: 8px 16px;
            background: white;
            border: 1px solid #222222;
            box-shadow: 0px 3px 2px rgba(63, 63, 63, 0.3);
            display: block;
            margin: 10px auto 0 auto;
            border-radius: 5px;
            font-size: 12px;
        }
        #result>div{
            width: 100%;
            font-weight: 500;
            font-size: 13px;
            text-align: center;
            /* margin-top: 45px; */
        }
        /* filter css */
        #filter{
            padding: 0 40px;
        }
        #filter h3{
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 0.5px;
            color: #222222;
            cursor: pointer;
            text-decoration: none solid rgb(33, 33, 33);
        }
        #click_desc_div{
            border-bottom: 1px solid rgb(63, 63, 53);
        }
        .display_filter{
            border-bottom: 1px solid rgb(63, 63, 53);
        }
        .heading{
            display: flex;
            justify-content: space-between;
            align-items: center;

        }
        #filter h4{
            font-size: 12px;
            font-weight: bold;
            letter-spacing: 1px;
            color: #222222;
            cursor: pointer;
            text-decoration: none solid rgb(33, 33, 33);
            text-transform: uppercase;
        }
        input[id^="check"]{
            display: none;
        }
        .f_div{
            margin: 10px 5px;
        }
        .f_label{
            margin-left: 5px;
        }
        /* <!-- .drop_icon_div{
            height: 25px;
            width: 25px;
        }
        .drop_icon_div>img{
            width: 100%;
            height: 100%;
        } --> */
        #five-star,#four-star,#three-star{
            display: flex;
            align-items: center;
        }
        #five-star img{
            width: 13px;
            height: 13px;
        }
        #four-star img{
            width: 13px;
            height: 13px;
        }
        #three-star img{
            width: 13px;
            height: 13px;
        }
    </style>
</head>
<body>
    <div id="container">
       
        <div id="nav">

        </div>
        <div id="section">
            <div id="filter">

            </div>
            <div id="products-sep">
                <div id="products">

                </div>
                <div id="result">

                </div>
            </div>

        </div>
        <!-- <img src="svg_image/expand_more.svg.svg"> -->
    </div>
</body>
</html>
<script>
    localStorage.setItem("filter_key",JSON.stringify([]));
    var five_star = `<div id="five-star">
            <div><img src="rating-image/full_star.svg"></div>
            <div><img src="rating-image/full_star.svg"></div>
            <div><img src="rating-image/full_star.svg"></div>
            <div><img src="rating-image/full_star.svg"></div>
            <div><img src="rating-image/full_star.svg"></div>
        </div>`;
    
    var four_star = `<div id="four-star">
            <div><img src="rating-image/full_star.svg"></div>
            <div><img src="rating-image/full_star.svg"></div>
            <div><img src="rating-image/full_star.svg"></div>
            <div><img src="rating-image/full_star.svg"></div>
            <div><img src="rating-image/blank_star.svg"></div>
        </div>`

    var three_star = `<div id="three-star">
            <div><img src="rating-image/full_star.svg"></div>
            <div><img src="rating-image/full_star.svg"></div>
            <div><img src="rating-image/full_star.svg"></div>
            <div><img src="rating-image/blank_star.svg"></div>
            <div><img src="rating-image/blank_star.svg"></div>
        </div>`
    const fetchingdata= async (min=0,max=24) =>{
        if(max>84){
            max = max-84+min;
        }
        if(min!==84){
            let res = await fetch(`http://localhost:3786/products?_start=${min}&_end=${max}`);
            let obj = await res.json();
            display_products(obj,min,max);
        }
    }    
    const display_products = (data,min,max) => {
        console.log(data);
        data.forEach((element,index) => {
            let card = document.createElement("div");
            card.setAttribute("class","card");

            let upper = document.createElement("div");
            upper.setAttribute("class","upper");
                let img_div =  document.createElement("div");
                img_div.setAttribute("class","img-div");
                    let image = document.createElement("img");
                    image.setAttribute("src",element.image);
                    image.setAttribute("alt",index);
                img_div.append(image);

                let sts = document.createElement("div");
                sts.setAttribute("class","status");
                sts.innerText = element.status;

                let ttl = document.createElement("div");
                ttl.setAttribute("class","title");
                ttl.innerText = element.title;

                let ifo = document.createElement("div");
                ifo.setAttribute("class","info");
                ifo.innerText = element.info;

                let prc = document.createElement("div");
                prc.setAttribute("class","price");
                prc.innerText = "$"+element.price;

                var rating_wrapper = document.createElement("div");
                rating_wrapper.setAttribute("class","rating-wrapper");

                    let rtgstar = document.createElement("div");
                    rtgstar.setAttribute("class","rating-star");
                    if(element.rating==""){
                        rating_wrapper.style.display = "none";
                    }
                    else{
                        if(Number(element.rating)<3.5){
                            rtgstar.innerHTML = three_star;
                        }
                        else if(Number(element.rating)<4){
                            rtgstar.innerHTML = four_star;
                        }
                        else{
                            rtgstar.innerHTML = five_star;
                        }
                        
                    }
                    let rtg = document.createElement("div");
                    rtg.setAttribute("class","rating");
                    rtg.innerText = element.rating;

                    let vt = document.createElement("div");
                    vt.setAttribute("class","votes");
                    vt.innerText = element.rating_votes;
                rating_wrapper.append(rtgstar,rtg,vt);
            upper.append(img_div,sts,ttl,ifo,prc,rating_wrapper);

            let lower = document.createElement("div");
            lower.setAttribute("class","lower");
                let addtobagbtn = document.createElement("button");
                addtobagbtn.setAttribute("id","addtobag");
                addtobagbtn.innerText = "ADD To BAG"
            lower.append(addtobagbtn);
            card.append(upper,lower);
            document.getElementById("products").append(card);

        });
        if(max!==84){

            document.getElementById("result").innerHTML = "";

            let resultdata = document.createElement("div");
            resultdata.innerText = "Showing " + max + " of 84";
            let btn = document.createElement("button");
            btn.innerText = "SEE MORE";
            btn.addEventListener("click",function(){
                fetchingdata(max,max+24);
            })
            document.getElementById("result").append(resultdata,btn);
        }
        else{
            document.getElementById("result").innerHTML = null;
        }
        
        
    }
    fetchingdata();
    // filter code start
    let upper = document.createElement("div");
    upper.setAttribute("id","upper");

        let click_data_sep = document.createElement("div");
        click_data_sep.setAttribute("id","click_data_sep");

            let heading_icon_sep = document.createElement("div");
            heading_icon_sep.setAttribute("id","click_data_sep");
                let h3 = document.createElement("h3");
                h3.setAttribute("id","filter_para");
                h3.innerText = "FILTER BY";

                let icon_box = document.createElement("div");
                icon_box.setAttribute("id","icon_box");
                //     let icon_img = document.createElement("img");
                //     img.setAttribute("src","abc");
                //     img.setAttribute("alt","icon");
                // icon_box.append(icon_img);
            heading_icon_sep.append(h3,icon_box);

            let click_desc_div = document.createElement("div");
            click_desc_div.setAttribute("id","click_desc_div");

        click_data_sep.append(heading_icon_sep,click_desc_div);
    upper.append(click_data_sep);

    document.getElementById("filter").append(upper);
    //lower portion of filter
    
    let lower = document.createElement("div");
    lower.setAttribute("id","lower");
    /* //firstfi portion filter */
        let first_filter_div1 = document.createElement("div");
        first_filter_div1.setAttribute("class","filter_div1");
        //1
            let f_div1 = document.createElement("div");
            f_div1.setAttribute("class","f_div");
                let f_check1 = document.createElement("input");
                f_check1.setAttribute("type","checkbox");
                f_check1.addEventListener("change",function(){

                });
                let f_label1 = document.createElement("label");
                f_label1.setAttribute("class","f_label");
                f_label1.innerText = "Regimen (6)"+"";
            f_div1.append(f_check1,f_label1);
        //2
            let f_div2 = document.createElement("div");
            f_div2.setAttribute("class","f_div");
                let f_check2 = document.createElement("input");
                f_check2.setAttribute("type","checkbox");
                f_check2.addEventListener("change",function(){

                });
                let f_label2 = document.createElement("label");
                f_label2.setAttribute("class","f_label");
                f_label2.innerText = "Face Serums (16)"+"";
            f_div2.append(f_check2,f_label2);
        //3
            let f_div3 = document.createElement("div");
            f_div3.setAttribute("class","f_div");
                let f_check3 = document.createElement("input");
                f_check3.setAttribute("type","checkbox");
                f_check3.addEventListener("change",function(){

                });
                let f_label3 = document.createElement("label");
                f_label3.setAttribute("class","f_label");
                f_label3.innerText = "Eyes (16)"+"";
            f_div3.append(f_check3,f_label3);
        //4
        let f_div4 = document.createElement("div");
            f_div4.setAttribute("class","f_div");
                let f_check4 = document.createElement("input");
                f_check4.setAttribute("type","checkbox");
                f_check4.addEventListener("change",function(){

                });
                let f_label4 = document.createElement("label");
                f_label4.setAttribute("class","f_label");
                f_label4.innerText = "Face Masks (5)"+"";
            f_div4.append(f_check4,f_label4); 
        //5
            let f_div5 = document.createElement("div");
            f_div5.setAttribute("class","f_div");
                let f_check5 = document.createElement("input");
                f_check5.setAttribute("type","checkbox");
                f_check5.addEventListener("change",function(){

                });
                let f_label5 = document.createElement("label");
                f_label5.setAttribute("class","f_label");
                f_label5.innerText = "Hand & Body (5)"+"";
            f_div5.append(f_check5,f_label5);
        //6
            let f_div6 = document.createElement("div");
            f_div6.setAttribute("class","f_div");
                let f_check6 = document.createElement("input");
                f_check6.setAttribute("type","checkbox");
                f_check6.addEventListener("change",function(){

                });
                let f_label6 = document.createElement("label");
                f_label6.setAttribute("class","f_label");
                f_label6.innerText = "Sun Protection (10)"+"";
            f_div6.append(f_check6,f_label6);
        //7
            let f_div7 = document.createElement("div");
            f_div7.setAttribute("class","f_div");
                let f_check7 = document.createElement("input");
                f_check7.setAttribute("type","checkbox");
                f_check7.addEventListener("change",function(){

                });
                let f_label7 = document.createElement("label");
                f_label7.setAttribute("class","f_label");
                f_label7.innerText = "Pro Skincare Tools (11)"+"";
            f_div7.append(f_check7,f_label7);
        //8
            let f_div8 = document.createElement("div");
            f_div8.setAttribute("class","f_div");
                let f_check8 = document.createElement("input");
                f_check8.setAttribute("type","checkbox");
                f_check8.addEventListener("change",function(){

                });
                let f_label8 = document.createElement("label");
                f_label8.setAttribute("class","f_label");
                f_label8.innerText = "Accessories (9)"+"";
            f_div8.append(f_check8,f_label8);
        //9
        let f_div9 = document.createElement("div");
            f_div9.setAttribute("class","f_div");
                let f_check9 = document.createElement("input");
                f_check9.setAttribute("type","checkbox");
                f_check9.addEventListener("change",function(){

                });
                let f_label9 = document.createElement("label");
                f_label9.setAttribute("class","f_label");
                f_label9.innerText = "Special Offers (18)"+"";
            f_div9.append(f_check9,f_label9);
        first_filter_div1.append(f_div1,f_div2,f_div3,f_div4,f_div5,f_div6,f_div7,f_div8,f_div9);
    
    /* // first */
        let first_filter = document.createElement("div");
        first_filter.setAttribute("class","parent_filter")
            let heading1 = document.createElement("div");
            heading1.setAttribute("class","heading");
                let h4_1 = document.createElement("h4");
                h4_1.innerText = "Category";
                let drop_icon_div1 = document.createElement("div");
                drop_icon_div1.setAttribute("class","drop_icon_div");
                // drop_icon_div1.style.display = "flex";
                    // let drop_icon1 = document.createElement("img");
                    // drop_icon1.setAttribute("src","svg_image/expand_more.svg.svg");
                    // drop_icon1.setAttribute("alt","icon");
                    var drop_icon1 = document.createElement("input");
                    drop_icon1.setAttribute("type","checkbox");
                    drop_icon1.setAttribute("id","check");
                    var lab1 = document.createElement("label");
                    lab1.setAttribute("for","check");
                    lab1.innerHTML = "<img src='svg_image/expand_more.svg.svg' width='25px' height='25px'>";
                    drop_icon1.addEventListener("change",function(){
                        change_bg();
                    })
                    function change_bg(){
                        if(drop_icon1.checked){
                            lab1.innerHTML = "<img src='svg_image/expand_less.svg.svg' width='25px' height='25px'>";
                            document.querySelector(".filter_div1").style.display = "none";
                        }
                        else{
                            lab1.innerHTML ="<img src='svg_image/expand_more.svg.svg' width='25px' height='25px'>";
                            document.querySelector(".filter_div1").style.display = "block";

                        }
                    }
                drop_icon_div1.append(drop_icon1,lab1);
                drop_icon_div1.addEventListener("click",function(){
                    dispaly_heading1_filter();
                });
            heading1.append(h4_1,drop_icon_div1);
            let display_filter1 = document.createElement("div");
            display_filter1.setAttribute("class","display_filter");
            display_filter1.append(first_filter_div1);
        first_filter.append(heading1,display_filter1);
    //second portion filter div all checkbox
    let sec_filter_div1 = document.createElement("div");
        sec_filter_div1.setAttribute("class","filter_div2");
        //1
            let s_div1 = document.createElement("div");
            s_div1.setAttribute("class","f_div");
                let s_check1 = document.createElement("input");
                s_check1.setAttribute("type","checkbox");
                s_check1.addEventListener("change",function(){

                });
                let s_label1 = document.createElement("label");
                s_label1.setAttribute("class","f_label");
                s_label1.innerText = "Fine Lines & Wrinkles (26)"+"";
            s_div1.append(s_check1,s_label1);
        //2
            let s_div2 = document.createElement("div");
            s_div2.setAttribute("class","f_div");
                let s_check2 = document.createElement("input");
                s_check2.setAttribute("type","checkbox");
                s_check2.addEventListener("change",function(){

                });
                let s_label2 = document.createElement("label");
                s_label2.setAttribute("class","f_label");
                s_label2.innerText = "Lifting & Firming (21)"+"";
            s_div2.append(s_check2,s_label2);
        //3
            let s_div3 = document.createElement("div");
            s_div3.setAttribute("class","f_div");
                let s_check3 = document.createElement("input");
                s_check3.setAttribute("type","checkbox");
                s_check3.addEventListener("change",function(){

                });
                let s_label3 = document.createElement("label");
                s_label3.setAttribute("class","f_label");
                s_label3.innerText = "Dull & Tired Skin (8)"+"";
            s_div3.append(s_check3,s_label3);
        //4
        let s_div4 = document.createElement("div");
            s_div4.setAttribute("class","f_div");
                let s_check4 = document.createElement("input");
                s_check4.setAttribute("type","checkbox");
                s_check4.addEventListener("change",function(){

                });
                let s_label4 = document.createElement("label");
                s_label4.setAttribute("class","f_label");
                s_label4.innerText = "Acne & Breakouts (13)"+"";
            s_div4.append(s_check4,s_label4); 
        //5
            let s_div5 = document.createElement("div");
            s_div5.setAttribute("class","f_div");
                let s_check5 = document.createElement("input");
                s_check5.setAttribute("type","checkbox");
                s_check5.addEventListener("change",function(){

                });
                let s_label5 = document.createElement("label");
                s_label5.setAttribute("class","f_label");
                s_label5.innerText = "Dark Spots & Uneven Skin Tone (12)"+"";
            s_div5.append(s_check5,s_label5);
        //6
            let s_div6 = document.createElement("div");
            s_div6.setAttribute("class","f_div");
                let s_check6 = document.createElement("input");
                s_check6.setAttribute("type","checkbox");
                s_check6.addEventListener("change",function(){

                });
                let s_label6 = document.createElement("label");
                s_label6.setAttribute("class","f_label");
                s_label6.innerText = "Sensitivity & Visible Redness (8)"+"";
            s_div6.append(s_check6,s_label6);
        //7
        let s_div7 = document.createElement("div");
            s_div7.setAttribute("class","f_div");
                let s_check7 = document.createElement("input");
                s_check7.setAttribute("type","checkbox");
                s_check7.addEventListener("change",function(){

                });
                let s_label7 = document.createElement("label");
                s_label7.setAttribute("class","f_label");
                s_label7.innerText = "Pores & Blackheads (11)"+"";
            s_div7.append(s_check7,s_label7);
        //8
        let s_div8 = document.createElement("div");
            s_div8.setAttribute("class","f_div");
                let s_check8 = document.createElement("input");
                s_check8.setAttribute("type","checkbox");
                s_check8.addEventListener("change",function(){

                });
                let s_label8 = document.createElement("label");
                s_label8.setAttribute("class","f_label");
                s_label8.innerText = "Dry Skin (19)"+"";
            s_div8.append(s_check8,s_label8);
        sec_filter_div1.append(s_div1,s_div2,s_div3,s_div4,s_div5,s_div6,s_div7,s_div8);

    //second;
    let second_filter = document.createElement("div");
            let heading2 = document.createElement("div");
            heading2.setAttribute("class","heading");
                let h4_2 = document.createElement("h4");
                h4_2.innerText = "SKIN CONCERN";
                let drop_icon_div2 = document.createElement("div");
                drop_icon_div2.setAttribute("class","drop_icon_div");
                    // let drop_icon2 = document.createElement("img");
                    // drop_icon2.setAttribute("src","svg_image/expand_more.svg.svg");
                    // drop_icon2.setAttribute("alt","icon");
                     var drop_icon2 = document.createElement("input");
                    drop_icon2.setAttribute("type","checkbox");
                    drop_icon2.setAttribute("id","check2");
                    var lab2 = document.createElement("label");
                    lab2.setAttribute("for","check2");
                    lab2.innerHTML = "<img src='svg_image/expand_more.svg.svg' width='25px' height='25px'>";
                    drop_icon2.addEventListener("change",function(){
                        change_bg2();
                    })
                    function change_bg2(){
                        if(drop_icon2.checked){
                            lab2.innerHTML = "<img src='svg_image/expand_less.svg.svg' width='25px' height='25px'>";
                            document.querySelector(".filter_div2").style.display = "none";

                        }
                        else{
                            lab2.innerHTML ="<img src='svg_image/expand_more.svg.svg' width='25px' height='25px'>";
                            document.querySelector(".filter_div2").style.display = "block";

                        }
                    }
                drop_icon_div2.append(drop_icon2,lab2);
                drop_icon_div2.addEventListener("click",function(){
                    dispaly_heading2_filter();
                });
            heading2.append(h4_2,drop_icon_div2);
            let display_filter2 = document.createElement("div");
            display_filter2.setAttribute("class","display_filter");
            display_filter2.append(sec_filter_div1);
        second_filter.append(heading2,display_filter2);
    //third portion filter div all checkbox
    let third_filter_div1 = document.createElement("div");
        third_filter_div1.setAttribute("class","filter_div3");
        //1
            let t_div1 = document.createElement("div");
            t_div1.setAttribute("class","f_div");
                let t_check1 = document.createElement("input");
                t_check1.setAttribute("type","checkbox");
                t_check1.addEventListener("change",function(){

                });
                let t_label1 = document.createElement("label");
                t_label1.setAttribute("class","f_label");
                t_label1.innerText = "Face (59)"+"";
            t_div1.append(t_check1,t_label1);
        //2
            let t_div2 = document.createElement("div");
            t_div2.setAttribute("class","f_div");
                let t_check2 = document.createElement("input");
                t_check2.setAttribute("type","checkbox");
                t_check2.addEventListener("change",function(){

                });
                let t_label2 = document.createElement("label");
                t_label2.setAttribute("class","f_label");
                t_label2.innerText = "Eyes (7)"+"";
            t_div2.append(t_check2,t_label2);
        //3
            let t_div3 = document.createElement("div");
            t_div3.setAttribute("class","f_div");
                let t_check3 = document.createElement("input");
                t_check3.setAttribute("type","checkbox");
                t_check3.addEventListener("change",function(){

                });
                let t_label3 = document.createElement("label");
                t_label3.setAttribute("class","f_label");
                t_label3.innerText = "Eyelashes (2)"+"";
            t_div3.append(t_check3,t_label3);
        //4
        let t_div4 = document.createElement("div");
            t_div4.setAttribute("class","f_div");
                let t_check4 = document.createElement("input");
                t_check4.setAttribute("type","checkbox");
                t_check4.addEventListener("change",function(){

                });
                let t_label4 = document.createElement("label");
                t_label4.setAttribute("class","f_label");
                t_label4.innerText = "Body (6)"+"";
            t_div4.append(t_check4,t_label4); 
        //5
            let t_div5 = document.createElement("div");
            t_div5.setAttribute("class","f_div");
                let t_check5 = document.createElement("input");
                t_check5.setAttribute("type","checkbox");
                t_check5.addEventListener("change",function(){

                });
                let t_label5 = document.createElement("label");
                t_label5.setAttribute("class","f_label");
                t_label5.innerText = "Hands (2)"+"";
            t_div5.append(t_check5,t_label5);
        //6
            let t_div6 = document.createElement("div");
            t_div6.setAttribute("class","f_div");
                let t_check6 = document.createElement("input");
                t_check6.setAttribute("type","checkbox");
                t_check6.addEventListener("change",function(){

                });
                let t_label6 = document.createElement("label");
                t_label6.setAttribute("class","f_label");
                t_label6.innerText = "Lips (3)"+"";
            t_div6.append(t_check6,t_label6);
       
        third_filter_div1.append(t_div1,t_div2,t_div3,t_div4,t_div5,t_div6);
    
    //third
    let third_filter = document.createElement("div");
            let heading3 = document.createElement("div");
            heading3.setAttribute("class","heading");
                let h4_3 = document.createElement("h4");
                h4_3.innerText = "APPLICATION AREA";
                let drop_icon_div3 = document.createElement("div");
                drop_icon_div3.setAttribute("class","drop_icon_div");
                    // let drop_icon3 = document.createElement("img");
                    // drop_icon3.setAttribute("src","svg_image/expand_more.svg.svg");
                    // drop_icon3.setAttribute("alt","icon");
                    var drop_icon3 = document.createElement("input");
                    drop_icon3.setAttribute("type","checkbox");
                    drop_icon3.setAttribute("id","check3");
                    var lab3 = document.createElement("label");
                    lab3.setAttribute("for","check3");
                    lab3.innerHTML = "<img src='svg_image/expand_more.svg.svg' width='25px' height='25px'>";
                    drop_icon3.addEventListener("change",function(){
                        change_bg3();
                    })
                    function change_bg3(){
                        if(drop_icon3.checked){
                            lab3.innerHTML = "<img src='svg_image/expand_less.svg.svg' width='25px' height='25px'>";
                            document.querySelector(".filter_div3").style.display = "none";

                        }
                        else{
                            lab3.innerHTML ="<img src='svg_image/expand_more.svg.svg' width='25px' height='25px'>";
                            document.querySelector(".filter_div3").style.display = "block";

                        }
                    }
                drop_icon_div3.append(drop_icon3,lab3);
                drop_icon_div3.addEventListener("click",function(){
                    dispaly_heading3_filter();
                });
            heading3.append(h4_3,drop_icon_div3);
            let display_filter3 = document.createElement("div");
            display_filter3.setAttribute("class","display_filter");
            display_filter3.append(third_filter_div1)
        third_filter.append(heading3,display_filter3);
    //fourth portion filter div all checkbox
    let fourth_filter_div1 = document.createElement("div");
        fourth_filter_div1.setAttribute("class","filter_div4");
        //1
            let fourth_div1 = document.createElement("div");
            fourth_div1.setAttribute("class","f_div");
                let fourth_check1 = document.createElement("input");
                fourth_check1.setAttribute("type","checkbox");
                fourth_check1.addEventListener("change",function(){
                    filter_products("Redefine",fourth_check1.checked);
                });
                let fourth_label1 = document.createElement("label");
                fourth_label1.setAttribute("class","f_label");
                fourth_label1.innerText = "Redefine (20)"+"";
            fourth_div1.append(fourth_check1,fourth_label1);
        //2
            let fourth_div2 = document.createElement("div");
            fourth_div2.setAttribute("class","f_div");
                let fourth_check2 = document.createElement("input");
                fourth_check2.setAttribute("type","checkbox");
                fourth_check2.addEventListener("change",function(){
                    filter_products("Reverse",fourth_check2.checked);
                });
                let fourth_label2 = document.createElement("label");
                fourth_label2.setAttribute("class","f_label");
                fourth_label2.innerText = "Reverse (11)"+"";
            fourth_div2.append(fourth_check2,fourth_label2);
        //3
            let fourth_div3 = document.createElement("div");
            fourth_div3.setAttribute("class","f_div");
                let fourth_check3 = document.createElement("input");
                fourth_check3.setAttribute("type","checkbox");
                fourth_check3.addEventListener("change",function(){
                    filter_products("Unblemish",fourth_check3.checked);
                });
                let fourth_label3 = document.createElement("label");
                fourth_label3.setAttribute("class","f_label");
                fourth_label3.innerText = "Unblemish (9)"+"";
            fourth_div3.append(fourth_check3,fourth_label3);
        //4
        let fourth_div4 = document.createElement("div");
            fourth_div4.setAttribute("class","f_div");
                let fourth_check4 = document.createElement("input");
                fourth_check4.setAttribute("type","checkbox");
                fourth_check4.addEventListener("change",function(){
                    filter_products("Soothe",fourth_check4.checked);
                });
                let fourth_label4 = document.createElement("label");
                fourth_label4.setAttribute("class","f_label");
                fourth_label4.innerText = "Soothe (8)"+"";
            fourth_div4.append(fourth_check4,fourth_label4); 
        //5
            let fourth_div5 = document.createElement("div");
            fourth_div5.setAttribute("class","f_div");
                let fourth_check5 = document.createElement("input");
                fourth_check5.setAttribute("type","checkbox");
                fourth_check5.addEventListener("change",function(){
                    filter_products("Spotless",fourth_check5.checked);
                });
                let fourth_label5 = document.createElement("label");
                fourth_label5.setAttribute("class","f_label");
                fourth_label5.innerText = "Spotless (4)"+"";
            fourth_div5.append(fourth_check5,fourth_label5);
        //6
            let fourth_div6 = document.createElement("div");
            fourth_div6.setAttribute("class","f_div");
                let fourth_check6 = document.createElement("input");
                fourth_check6.setAttribute("type","checkbox");
                fourth_check6.addEventListener("change",function(){
                    filter_products("Recharge",fourth_check6.checked);
                });
                let fourth_label6 = document.createElement("label");
                fourth_label6.setAttribute("class","f_label");
                fourth_label6.innerText = "Recharge (8)"+"";
            fourth_div6.append(fourth_check6,fourth_label6);
        //7
            let fourth_div7 = document.createElement("div");
            fourth_div7.setAttribute("class","f_div");
                let fourth_check7 = document.createElement("input");
                fourth_check7.setAttribute("type","checkbox");
                fourth_check7.addEventListener("change",function(){
                    filter_products("Enhancements",fourth_check7.checked);
                });
                let fourth_label7 = document.createElement("label");
                fourth_label7.setAttribute("class","f_label");
                fourth_label7.innerText = "Enhancements (22)"+"";
            fourth_div7.append(fourth_check7,fourth_label7);
        //8
            let fourth_div8 = document.createElement("div");
            fourth_div8.setAttribute("class","f_div");
                let fourth_check8 = document.createElement("input");
                fourth_check8.setAttribute("type","checkbox");
                fourth_check8.addEventListener("change",function(){
                    filter_products("Dermacosmetics",fourth_check8.checked);
                });
                let fourth_label8 = document.createElement("label");
                fourth_label8.setAttribute("class","f_label");
                fourth_label8.innerText = "Dermacosmetics (2)"+"";
            fourth_div8.append(fourth_check8,fourth_label8);
        //9
            let fourth_div9 = document.createElement("div");
            fourth_div9.setAttribute("class","f_div");
                let fourth_check9 = document.createElement("input");
                fourth_check9.setAttribute("type","checkbox");
                fourth_check9.addEventListener("change",function(){
                    filter_products("Essentials",fourth_check9.checked);
                });
                let fourth_label9 = document.createElement("label");
                fourth_label9.setAttribute("class","f_label");
                fourth_label9.innerText = "Essentials (8)"+"";
            fourth_div9.append(fourth_check9,fourth_label9);
        fourth_filter_div1.append(fourth_div1,fourth_div2,fourth_div3,fourth_div4,fourth_div5,fourth_div6,fourth_div7,fourth_div8,fourth_div9);
    
    //fourth
    let fourth_filter = document.createElement("div");
            let heading4 = document.createElement("div");
            heading4.setAttribute("class","heading");
                let h4_4 = document.createElement("h4");
                h4_4.innerText = "PRODUCT LINE";
                let drop_icon_div4 = document.createElement("div");
                drop_icon_div4.setAttribute("class","drop_icon_div");
                    // let drop_icon4 = document.createElement("img");
                    // drop_icon4.setAttribute("src","svg_image/expand_more.svg.svg");
                    // drop_icon4.setAttribute("alt","icon");
                    var drop_icon4 = document.createElement("input");
                    drop_icon4.setAttribute("type","checkbox");
                    drop_icon4.setAttribute("id","check4");
                    var lab4 = document.createElement("label");
                    lab4.setAttribute("for","check4");
                    lab4.innerHTML = "<img src='svg_image/expand_more.svg.svg' width='25px' height='25px'>";
                    drop_icon4.addEventListener("change",function(){
                        change_bg4();
                    })
                    function change_bg4(){
                        if(drop_icon4.checked){
                            lab4.innerHTML = "<img src='svg_image/expand_less.svg.svg' width='25px' height='25px'>";
                            document.querySelector(".filter_div4").style.display = "none";
                        }
                        else{
                            lab4.innerHTML ="<img src='svg_image/expand_more.svg.svg' width='25px' height='25px'>";
                            document.querySelector(".filter_div4").style.display = "block";

                        }
                    }
                drop_icon_div4.append(drop_icon4,lab4);
                drop_icon_div4.addEventListener("click",function(){
                    dispaly_heading4_filter();
                });
            heading4.append(h4_4,drop_icon_div4);
            let display_filter4 = document.createElement("div");
            display_filter4.setAttribute("class","display_filter");
            display_filter4.append(fourth_filter_div1)
        fourth_filter.append(heading4,display_filter4);
    lower.append(first_filter,second_filter,third_filter,fourth_filter);
    document.getElementById("filter").append(lower);
   
    // display first filter list function
    function filter_products(a,b){
        console.log(a,b);
        if(b){
            let arr = JSON.parse(localStorage.getItem("filter_key")) || [];
            arr.push(a);
            localStorage.setItem("filter_key",JSON.stringify(arr));
            display_products_data();
        }
        else{
            console.log("onchange",a,b);
            let arr = JSON.parse(localStorage.getItem("filter_key")) || [];
            for(var i=0;i<arr.length;i++){
                if(arr[i]==a){
                    arr.splice(i,1);
                    break;
                }
            }
            
            localStorage.setItem("filter_key",JSON.stringify(arr));
            display_products_data();
        }
    }
    var display_products_data = async() => {
        document.getElementById("products").innerHTML= null;
        let res = await fetch(`http://localhost:3786/products`);
        let obj = await res.json();
        console.log(obj);
        var filters = JSON.parse(localStorage.getItem("filter_key")) || [];
        if(filters.length==0){
            fetchingdata();
        }
        else{
        //filter
        const filteredArray = obj.filter(ele => {
            let result = false;
        //     "category": "Face Serums",
        // "application_area": "Face",
        // "skin_concern": "Fine Lines & Wrinkles",
        // "product_line": "Redefine",
            for(let key of filters) {
                if (ele.category== key || ele.application_area==key || ele.skin_concern==key || ele.product_line==key){
                    result = true;
                    break;
                }
            }
            return result;  
        });
        console.log("filtered",filteredArray);
        filteredArray.forEach((element,index) => {
            let card = document.createElement("div");
            card.setAttribute("class","card");

            let upper = document.createElement("div");
            upper.setAttribute("class","upper");
                let img_div =  document.createElement("div");
                img_div.setAttribute("class","img-div");
                    let image = document.createElement("img");
                    image.setAttribute("src",element.image);
                    image.setAttribute("alt",index);
                img_div.append(image);

                let sts = document.createElement("div");
                sts.setAttribute("class","status");
                sts.innerText = element.status;

                let ttl = document.createElement("div");
                ttl.setAttribute("class","title");
                ttl.innerText = element.title;

                let ifo = document.createElement("div");
                ifo.setAttribute("class","info");
                ifo.innerText = element.info;

                let prc = document.createElement("div");
                prc.setAttribute("class","price");
                prc.innerText = "$"+element.price;

                var rating_wrapper = document.createElement("div");
                rating_wrapper.setAttribute("class","rating-wrapper");

                    let rtgstar = document.createElement("div");
                    rtgstar.setAttribute("class","rating-star");
                    if(element.rating==""){
                        rating_wrapper.style.display = "none";
                    }
                    else{
                        if(Number(element.rating)<3.5){
                            rtgstar.innerHTML = three_star;
                        }
                        else if(Number(element.rating)<4){
                            rtgstar.innerHTML = four_star;
                        }
                        else{
                            rtgstar.innerHTML = five_star;
                        }
                        
                    }
                    let rtg = document.createElement("div");
                    rtg.setAttribute("class","rating");
                    rtg.innerText = element.rating;

                    let vt = document.createElement("div");
                    vt.setAttribute("class","votes");
                    vt.innerText = element.rating_votes;
                rating_wrapper.append(rtgstar,rtg,vt);
            upper.append(img_div,sts,ttl,ifo,prc,rating_wrapper);
            card.append(upper);
            document.getElementById("products").append(card);
        });
    }
        
    }

               

        

</script>